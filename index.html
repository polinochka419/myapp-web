<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Smart TV Widget - Ярославль</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #1a2a6c, #2c3e50);
      color: white;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      overflow: hidden;
      position: relative;
    }

    /* Фоновое слайд-шоу */
    .photo-show {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0.3;
      z-index: -1;
    }

    .photo-slide {
      position: absolute;
      width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
      opacity: 0;
      transition: opacity 2s ease-in-out;
    }

    .photo-slide.active {
      opacity: 1;
    }

    /* Стеклянная панель */
    .glass-panel {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-radius: 24px;
      padding: 32px;
      width: 100%;
      max-width: 1200px;
      box-shadow:
        0 8px 32px rgba(31, 38, 135, 0.37),
        0 4px 16px rgba(0, 0, 0, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.18);
      position: relative;
      overflow: hidden;
      animation: fadeIn 1.2s ease-out;
    }

    .glass-panel::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(
        135deg,
        rgba(255, 255, 255, 0.1) 0%,
        rgba(255, 255, 255, 0) 100%
      );
      pointer-events: none;
      border-radius: 24px;
    }

    .header {
      text-align: center;
      margin-bottom: 30px;
      position: relative;
      z-index: 2;
    }

    .city {
      font-size: 2.8rem;
      font-weight: 700;
      margin-bottom: 12px;
      text-shadow: 0 2px 12px rgba(0, 0, 0, 0.3);
      background: linear-gradient(135deg, #ffffff, #a855f7);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .time {
      font-size: 4.2rem;
      font-weight: 300;
      margin-bottom: 8px;
      letter-spacing: 2px;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }

    .date {
      font-size: 1.3rem;
      opacity: 0.95;
      text-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);
    }

    .content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 28px;
      position: relative;
      z-index: 2;
    }

    .weather-card,
    .info-card,
    .traffic-card {
      background: rgba(255, 255, 255, 0.08);
      border-radius: 20px;
      padding: 24px;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.12);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .weather-card:hover,
    .info-card:hover,
    .traffic-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
    }

    .weather-card h2,
    .info-card h2,
    .traffic-card h2 {
      font-size: 1.6rem;
      margin-bottom: 22px;
      display: flex;
      align-items: center;
      gap: 12px;
      background: linear-gradient(135deg, #ffffff, #60a5fa);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-weight: 600;
    }

    .weather-card h2 i,
    .info-card h2 i,
    .traffic-card h2 i {
      font-size: 2rem;
    }

    .weather-info {
      display: flex;
      align-items: center;
      gap: 22px;
      margin-bottom: 18px;
    }

    .temperature {
      font-size: 3.2rem;
      font-weight: 700;
      background: linear-gradient(135deg, #ffffff, #fbbf24);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .weather-condition {
      font-size: 1.4rem;
      opacity: 0.95;
      font-weight: 500;
    }

    .weather-details {
      margin-top: 18px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-bottom: 22px;
    }

    .detail-item {
      display: flex;
      justify-content: space-between;
      padding: 10px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.15);
      font-weight: 500;
    }

    .detail-item span:first-child {
      opacity: 0.85;
    }

    .detail-item span:last-child {
      font-weight: 600;
      color: #fbbf24;
    }

    .clothing-advice {
      background: rgba(74, 222, 128, 0.15);
      border-radius: 16px;
      padding: 18px;
      margin-top: 18px;
      border-left: 4px solid #4ade80;
      backdrop-filter: blur(8px);
    }

    .clothing-advice h3 {
      font-size: 1.2rem;
      margin-bottom: 10px;
      color: #4ade80;
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 600;
    }

    .clothing-text {
      font-size: 1.05rem;
      line-height: 1.5;
      font-weight: 500;
    }

    .what-to-take {
      margin-top: 16px;
      background: rgba(96, 165, 250, 0.15);
      border-radius: 16px;
      padding: 18px;
      border-left: 4px solid #60a5fa;
      backdrop-filter: blur(8px);
    }

    .what-to-take h3 {
      color: #60a5fa;
      font-weight: 600;
    }

    .info-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 18px;
    }

    .info-item {
      padding: 14px;
      background: rgba(255, 255, 255, 0.08);
      border-radius: 14px;
      text-align: center;
      backdrop-filter: blur(8px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .info-label {
      font-size: 0.95rem;
      opacity: 0.8;
      margin-bottom: 6px;
      font-weight: 500;
    }

    .info-value {
      font-size: 1.3rem;
      font-weight: 700;
      background: linear-gradient(135deg, #ffffff, #fbbf24);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .quote {
      grid-column: 1 / -1;
      text-align: center;
      padding: 24px;
      background: rgba(255, 255, 255, 0.08);
      border-radius: 20px;
      margin-top: 14px;
      backdrop-filter: blur(8px);
      border: 1px solid rgba(255, 255, 255, 0.12);
    }

    .quote-text {
      font-style: italic;
      font-size: 1.2rem;
      line-height: 1.5;
      font-weight: 500;
      margin-bottom: 12px;
    }

    .quote-author {
      font-size: 1rem;
      opacity: 0.85;
      font-weight: 600;
    }

    @media (max-width: 768px) {
      .content {
        grid-template-columns: 1fr;
      }

      .time {
        font-size: 3.2rem;
      }

      .city {
        font-size: 2.2rem;
      }

      .temperature {
        font-size: 2.6rem;
      }

      .weather-info {
        flex-direction: column;
        align-items: center;
        text-align: center;
      }

      .glass-panel {
        padding: 24px;
      }
    }

    @media (max-width: 480px) {
      .glass-panel {
        padding: 20px;
        margin: 0 10px;
      }

      .time {
        font-size: 2.6rem;
      }

      .city {
        font-size: 1.8rem;
      }

      .temperature {
        font-size: 2rem;
      }

      .weather-details {
        grid-template-columns: 1fr;
      }

      .clothing-text,
      .quote-text {
        font-size: 0.95rem;
      }

      .info-value {
        font-size: 1.1rem;
      }
    }

    /* Анимация появления */
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(15px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Карточка пробок */
    .traffic-card {
      grid-column: 1 / -1;
    }

    @media (min-width: 900px) {
      .content {
        grid-template-columns: 1fr 1fr 1fr;
      }

      .traffic-card {
        grid-column: auto;
      }
    }

    @media (max-width: 768px) {
      .traffic-card {
        grid-column: 1 / -1;
      }
    }

    .traffic-note {
      text-align: center;
      font-size: 0.85rem;
      opacity: 0.7;
      margin-top: 8px;
    }
  </style>
</head>
<body>
  <!-- Фоновое слайд-шоу -->
  <div class="photo-show" id="photoShow">
    <div
      class="photo-slide active"
      style="background-image: url('https://images.wallpaperscraft.ru/image/single/devushka_tsvety_choker_1149762_3840x2160.jpg')"
    ></div>
    <div
      class="photo-slide"
      style="background-image: url('https://images.wallpaperscraft.ru/image/single/devushka_vzgliad_listia_206165_3840x2160.jpg')"
    ></div>
    <div
      class="photo-slide"
      style="background-image: url('https://images.wallpaperscraft.ru/image/single/devushka_sumka_avtobus_917489_3840x2160.jpg')"
    ></div>
    <div
      class="photo-slide"
      style="background-image: url('https://images.wallpaperscraft.ru/image/single/devushka_kraska_poza_1308379_1920x1080.jpg')"
    ></div>
  </div>

  <!-- Стеклянная панель -->
  <div class="glass-panel">
    <div class="header">
      <div class="city">Ярославль</div>
      <div class="time" id="currentTime">--:--</div>
      <div class="date" id="currentDate">--.--.----</div>
    </div>

    <div class="content">
      <div class="weather-card">
        <h2>Погода</h2>
        <div class="weather-info">
          <div class="temperature" id="temperature">--°C</div>
          <div class="weather-condition" id="weatherCondition">Загрузка...</div>
        </div>
        <div class="weather-details">
          <div class="detail-item">
            <span>Влажность:</span>
            <span id="humidity">--%</span>
          </div>
          <div class="detail-item">
            <span>Ветер:</span>
            <span id="windSpeed">-- м/с</span>
          </div>
          <div class="detail-item">
            <span>Давление:</span>
            <span id="pressure">-- мм</span>
          </div>
          <div class="detail-item">
            <span>Ощущается:</span>
            <span id="feelsLike">--°C</span>
          </div>
        </div>

        <div class="clothing-advice">
          <h3>Как одеться</h3>
          <div class="clothing-text" id="clothingAdvice">Загрузка...</div>
        </div>

        <div class="what-to-take">
          <h3>Что взять с собой</h3>
          <div class="clothing-text" id="whatToTake">Загрузка...</div>
        </div>
      </div>

      <div class="info-card">
        <h2>Информация</h2>
        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">Курс USD</div>
            <div class="info-value" id="usdRate">-- ₽</div>
          </div>
          <div class="info-item">
            <div class="info-label">Курс EUR</div>
            <div class="info-value" id="eurRate">-- ₽</div>
          </div>
          <div class="info-item">
            <div class="info-label">Население</div>
            <div class="info-value">585 тыс</div>
          </div>
          <div class="info-item">
            <div class="info-label">Часовой пояс</div>
            <div class="info-value">MSK (UTC+3)</div>
          </div>
        </div>

        <div class="quote">
          <div class="quote-text" id="quoteText">"Время — лучший лекарь."</div>
          <div class="quote-author" id="quoteAuthor">— Овидий</div>
        </div>
      </div>

      <!-- Карточка пробок -->
      <div class="traffic-card">
        <h2>Пробки</h2>
        <div class="traffic-map">
          <iframe
            src="https://yandex.ru/map-widget/v1/?ll=39.8976%2C57.60&amp;z=11&amp;l=map%2Ctrf&amp;origin=jsapi-widget"
            width="100%"
            height="410"
            frameborder="0"
            allowfullscreen="true"
          ></iframe>
        </div>
        <div class="traffic-note">
          Данные Яндекс.Карт, обновляются каждые 2–3 мин
        </div>
      </div>
    </div>
  </div>

  <script>
    // === ВСПОМОГАТЕЛЬНЫЕ ФУНКЦИИ ===

    // Получение рекомендаций по одежде
    function getClothingAdvice(temperature, condition, humidity, windSpeed) {
      let clothing = '';
      let whatToTake = '';

      // Основная рекомендация по температуре
      if (temperature <= -10) {
        clothing = 'Теплая зимняя куртка, шапка, перчатки, шарф, теплые ботинки';
        whatToTake = 'Термос с горячим напитком, перчатки с сенсорными пальцами для телефона';
      } else if (temperature <= 0) {
        clothing = 'Зимняя куртка, шапка, перчатки, шарф';
        whatToTake = 'Зонт (если возможен снег), термос с чаем';
      } else if (temperature <= 10) {
        clothing = 'Демисезонная куртка, свитер, джинсы, ботинки';
        whatToTake = 'Зонт, перчатки (если ветрено)';
      } else if (temperature <= 20) {
        clothing = 'Легкая куртка или ветровка, джинсы, футболка';
        whatToTake = 'Зонт (при облачности), солнечные очки';
      } else if (temperature <= 25) {
        clothing = 'Футболка, шорты или легкие брюки, кроссовки';
        whatToTake = 'Солнечные очки, головной убор, бутылку воды';
      } else {
        clothing = 'Легкая одежда, шорты, сандалии';
        whatToTake = 'Солнечные очки, головной убор, солнцезащитный крем, бутылку воды';
      }

      // Дополнительные условия
      const lowerCondition = condition.toLowerCase();
      if (lowerCondition.includes('дождь') || lowerCondition.includes('ливень')) {
        whatToTake = 'Прочный зонт, непромокаемая обувь, дождевик';
      } else if (lowerCondition.includes('снег')) {
        whatToTake = 'Теплые перчатки, нескользящая обувь, зонт';
      } else if (lowerCondition.includes('гроза')) {
        whatToTake = 'Зонт, избегайте открытых мест и высоких деревьев';
      } else if (humidity > 80 && temperature > 20) {
        whatToTake += ', бутылку воды (высокая влажность)';
      }

      if (windSpeed > 5) {
        if (!whatToTake.includes('ветрено')) {
          whatToTake += ', ветровка или куртка с капюшоном (ветрено)';
        }
      }

      return { clothing, whatToTake };
    }

    // Фоновое слайд-шоу
    function initPhotoShow() {
      const slides = document.querySelectorAll('.photo-slide');
      let current = 0;

      setInterval(() => {
        slides[current].classList.remove('active');
        current = (current + 1) % slides.length;
        slides[current].classList.add('active');
      }, 8000);
    }

    // Обновление времени и даты
    function updateTime() {
      const now = new Date();
      const hours = String(now.getHours()).padStart(2, '0');
      const minutes = String(now.getMinutes()).padStart(2, '0');
      document.getElementById('currentTime').textContent = `${hours}:${minutes}`;

      const weekdays = ['Воскресенье', 'Понедельник', 'Вторник', 'Среда', 'Четверг', 'Пятница', 'Суббота'];
      const months = ['января', 'февраля', 'марта', 'апреля', 'мая', 'июня', 'июля', 'августа', 'сентября', 'октября', 'ноября', 'декабря'];
      const day = weekdays[now.getDay()];
      const date = now.getDate();
      const month = months[now.getMonth()];
      const year = now.getFullYear();

      document.getElementById('currentDate').textContent = `${day}, ${date} ${month} ${year} г.`;
    }

    // === ВНЕШНИЕ ДАННЫЕ ===

    const API_KEY = '39b8fb9eb1024fdbaeb74538252711';
    const CITY = 'Yaroslavl';

    const conditionShort = {
      Sunny: 'Солнечно',
      Clear: 'Ясно',
      'Partly cloudy': 'Переменная облачность',
      Cloudy: 'Облачно',
      Overcast: 'Пасмурно',
      Mist: 'Мгла',
      Fog: 'Туман',
      'Light rain': 'Небольшой дождь',
      Rain: 'Дождь',
      'Heavy rain': 'Сильный дождь',
      'Light snow': 'Небольшой снег',
      Snow: 'Снег',
      Blizzard: 'Метель',
    };

    async function updateWeather() {
      try {
        const res = await fetch(
          `https://api.weatherapi.com/v1/current.json?key=${API_KEY}&q=${CITY}&lang=ru`
        );
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        const data = await res.json();

        const current = data.current;

        document.getElementById('temperature').textContent = `${Math.round(current.temp_c)}°C`;
        document.getElementById('weatherCondition').textContent =
          conditionShort[current.condition.text] || current.condition.text;
        document.getElementById('humidity').textContent = `${current.humidity}%`;
        document.getElementById('windSpeed').textContent = `${(current.wind_kph / 3.6).toFixed(1)} м/с`;
        document.getElementById('pressure').textContent = `${Math.round(current.pressure_mb * 0.750062)} мм`;
        document.getElementById('feelsLike').textContent = `${Math.round(current.feelslike_c)}°C`;

        const advice = getClothingAdvice(
          current.temp_c,
          current.condition.text,
          current.humidity,
          current.wind_kph / 3.6
        );
        document.getElementById('clothingAdvice').textContent = advice.clothing;
        document.getElementById('whatToTake').textContent = advice.whatToTake;
      } catch (err) {
        console.error('Ошибка получения погоды:', err);
        document.getElementById('weatherCondition').textContent = 'Ошибка загрузки';
      }
    }

    function updateCurrencyRates() {
      const usd = (92 + Math.random() * 2).toFixed(2);
      const eur = (101 + Math.random() * 2).toFixed(2);
      document.getElementById('usdRate').textContent = `${usd} ₽`;
      document.getElementById('eurRate').textContent = `${eur} ₽`;
    }

    const quotes = [
      { text: 'Время — лучший лекарь.', author: 'Овидий' },
      { text: 'Утро вечера мудренее.', author: 'Русская пословица' },
      { text: 'Природа создает, а время развивает.', author: 'Жан Жак Руссо' },
      { text: 'Время — мера всех вещей.', author: 'Аристотель' },
      { text: 'Время правит миром.', author: 'Овидий' },
    ];

    function updateQuote() {
      const q = quotes[Math.floor(Math.random() * quotes.length)];
      document.getElementById('quoteText').textContent = `"${q.text}"`;
      document.getElementById('quoteAuthor').textContent = `— ${q.author}`;
    }

    // === ИНИЦИАЛИЗАЦИЯ ===
    document.addEventListener('DOMContentLoaded', () => {
      initPhotoShow();
      updateTime();
      updateWeather();
      updateCurrencyRates();
      updateQuote();

      setInterval(updateTime, 60_000);
      setInterval(updateWeather, 15 * 60_000);
      setInterval(updateCurrencyRates, 30 * 60_000);
      setInterval(updateQuote, 2 * 60 * 60_000);
    });
  </script>
</body>
</html>